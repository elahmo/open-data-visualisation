function display(){d3.select("#begin").text(projectsOfset),d3.select("#end").text(projectsOfset+projectsPerPage-1),d3.select("#last").attr("disabled",projectsOfset-projectsPerPage<0?"true":null),d3.select("#next").attr("disabled",projectsOfset+projectsPerPage>=datasetCleaned.size(1/0)?"true":null),d3.select("#size").text(datasetCleaned.size(1/0))}function update(){projectDataTable.beginSlice(projectsOfset),projectDataTable.endSlice(projectsOfset+projectsPerPage),display()}function next(){projectsOfset+=projectsPerPage,update(),projectDataTable.redraw()}function last(){projectsOfset-=projectsPerPage,update(),projectDataTable.redraw()}var projectDataTable=dc.dataTable("#projectDataTable"),timeline=dc.barChart("#timeline"),deptChart=dc.rowChart("#barDeptChart"),statusPie=dc.pieChart("#statusPie"),projectPie=dc.pieChart("#projectPie"),datasetCleaned;d3.csv("data/cleaned.csv",function(a){datasetCleaned=crossfilter(a);var c=(datasetCleaned.groupAll(),d3.time.format("%b-%Y")),d=new Date(2007,1,1),e=new Date(2013,1,1);a.forEach(function(a){dateTemp=c.parse(a.datestr),dateTemp<d&&(d=dateTemp),dateTemp>e&&(e=dateTemp),a.dd=dateTemp});var f=datasetCleaned.dimension(function(a){return a["Agency Name"]});f.group(),d3.format("02d");projectDataTable.dimension(f).group(function(a){return a["Agency Name"]}).size(1/0).columns(["Agency Name","Project Name","ProjectStatus","Lifecycle Cost"]).sortBy(function(a){return parseFloat(a["Lifecycle Cost"])}).order(d3.descending),update();var i=datasetCleaned.dimension(function(a){return a["Agency Name"]}),j=i.group();deptChart.width(480).height(1e3).dimension(i).group(j).label(function(a){return a.key}).title(function(a){return a.value}).elasticX(!0).ordering(function(a){return-a.value}).xAxis().ticks(6);var k=datasetCleaned.dimension(function(a){return a.dd}),l=k.group();timeline.width(500).height(200).dimension(k).group(l).centerBar(!1).elasticX(!1).gap(0).xUnits(function(){return 50}).x(d3.time.scale().domain([d,e])).renderHorizontalGridLines(!0);var m=datasetCleaned.dimension(function(a){return a.ScheduleStatus}),n=m.group();statusPie.width(200).height(200).slicesCap(3).innerRadius(30).dimension(m).group(n).legend(dc.legend()).on("pretransition",function(a){a.selectAll("text.pie-slice").text(function(a){return dc.utils.printSingleValue((a.endAngle-a.startAngle)/(2*Math.PI)*100)+"%"})});var o=datasetCleaned.dimension(function(a){return a.ProjectStatus}),p=o.group();projectPie.width(200).height(200).slicesCap(3).innerRadius(30).dimension(o).group(p).legend(dc.legend()).on("pretransition",function(a){a.selectAll("text.pie-slice").text(function(a){return dc.utils.printSingleValue((a.endAngle-a.startAngle)/(2*Math.PI)*100)+"%"})}),dc.renderAll()});var projectsOfset=0,projectsPerPage=12;